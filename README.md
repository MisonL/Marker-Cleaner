<div align="center">
<br/>

<a href="https://github.com/MisonL/Marker-Cleaner">
  <img src="assets/logo.svg" width="600" alt="Marker Cleaner Logo">
</a>

### ğŸ§¹ Marker Cleaner | å…¨é“¾è·¯å¤šæ¨¡æ€å›¾åƒæ ‡è®°å‡€åŒ–å·¥å…·

![Version](https://img.shields.io/badge/version-1.0.0-blue.svg?style=flat-square)
![License](https://img.shields.io/badge/license-MIT-green.svg?style=flat-square)
![Stack](https://img.shields.io/badge/tech-Bun%20%7C%20React%20Ink%20%7C%20TypeScript-black.svg?style=flat-square)
![Lang](https://img.shields.io/badge/lang-ç®€ä½“ä¸­æ–‡-red.svg?style=flat-square)
<br/>
<br/>

**Marker Cleaner** æ˜¯ä¸€æ¬¾ä¸“ä¸ºç°ä»£è§†è§‰å†…å®¹åˆ›ä½œè€…æ‰“é€ çš„ **å¤šæ¨¡æ€ AI é©±åŠ¨å·¥å…·**ã€‚å®ƒæ·±åº¦é›†æˆæœ€å‰æ²¿çš„è§†è§‰è¯­è¨€æ¨¡å‹ (VLM)ï¼Œèƒ½å¤Ÿè‡ªåŠ¨è§£æã€ç²¾å‡†å®šä½å¹¶æ™ºèƒ½é‡ç»˜å›¾ç‰‡ä¸­çš„å„ç±»äººå·¥æ ‡è®°ï¼ˆåŒ…æ‹¬ä½†ä¸é™äºçŸ©å½¢æ¡†ã€æŒ‡ç¤ºç®­å¤´ã€æ–‡æœ¬æ‰¹æ³¨ç­‰ï¼‰ï¼Œå®ç°åƒç´ çº§çš„èƒŒæ™¯æ— æŸè¿˜åŸã€‚

å·¥å…·ç°å·²å…¨é¢æ”¯æŒ **Google Gemini 2.0 / 1.5 Pro** ç³»åˆ—ä¸ **Antigravity Pro** å¼•æ“ï¼Œä¸ºæ‚¨æä¾›å·¥ä¸šçº§çš„å›¾åƒå¤„ç†ååé‡ä¸ä¿®å¤è´¨é‡ã€‚

[å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [é…ç½®æŒ‡å—](#-é…ç½®æŒ‡å—) â€¢ [æ„å»ºéƒ¨ç½²](#-æ„å»ºä¸éƒ¨ç½²) â€¢ [æ•…éšœæ’é™¤](#-æ•…éšœæ’é™¤)

</div>

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ¤– åŒé‡ AI å¼•æ“æ¶æ„

æˆ‘ä»¬é’ˆå¯¹ä¸åŒåœºæ™¯æä¾›äº†ä¸¤ç§æå…¶ä¼˜åŒ–çš„å·¥ä½œæ¨¡å¼ï¼š

| æ¨¡å¼               | åˆ«å         | é€‚ç”¨åœºæ™¯               | æŠ€æœ¯åŸç†                                  | ä¼˜åŠ¿                                         |
| :----------------- | :----------- | :--------------------- | :---------------------------------------- | :------------------------------------------- |
| **Native æ¨¡å¼**    | Pro / Gen    | **å¤æ‚èƒŒæ™¯ã€é‡åº¦é®æŒ¡** | åˆ©ç”¨ Gemini çš„å¤šæ¨¡æ€é‡ç»˜èƒ½åŠ› (Inpainting) | å®Œç¾ä¿®å¤çº¹ç†ç»†èŠ‚ï¼Œæ— ç—•è¿˜åŸï¼Œæ•ˆæœæœ€é¡¶         |
| **Detection æ¨¡å¼** | Nano / Flash | **çº¯è‰²èƒŒæ™¯ã€ç®€å•æ ‡è®°** | Gemini è§†è§‰å®šä½ + æœ¬åœ° `Sharp` åƒç´ æ›¿æ¢   | é€Ÿåº¦æå¿«ï¼ŒToken æ¶ˆè€—æä½ï¼Œé€‚åˆå¤§æ‰¹é‡ç®€å•å¤„ç† |

#### ğŸ¨ Native Mode è¯¦è§£

> **æŠ€æœ¯åŸç†**ï¼šè°ƒç”¨æ”¯æŒå›¾åƒç”Ÿæˆçš„å¤šæ¨¡æ€æ¨¡å‹ï¼ˆå¦‚ `gemini-3-pro-image`ã€`gemini-2.5-flash-image`ï¼‰ï¼Œç›´æ¥è®© AI ç†è§£å›¾ç‰‡å†…å®¹å¹¶**é‡æ–°ç»˜åˆ¶è¢«æ ‡è®°æ±¡æŸ“çš„åŒºåŸŸ**ã€‚
>
> **ä½•æ—¶ä½¿ç”¨**ï¼š
>
> - èƒŒæ™¯çº¹ç†å¤æ‚ï¼ˆå¦‚é£æ™¯ç…§ã€äººç‰©ç…§ï¼‰
> - æ ‡è®°é®æŒ¡äº†é‡è¦å†…å®¹ç»†èŠ‚
> - å¯¹è¿˜åŸè´¨é‡æœ‰æé«˜è¦æ±‚
>
> **æ³¨æ„**ï¼šæ­¤æ¨¡å¼ä¼šäº§ç”Ÿ **å›¾åƒç”Ÿæˆ Token** è´¹ç”¨ï¼Œæˆæœ¬ç›¸å¯¹è¾ƒé«˜ã€‚

#### âš¡ Detection Mode è¯¦è§£

> **æŠ€æœ¯åŸç†**ï¼šè°ƒç”¨è§†è§‰è¯†åˆ«æ¨¡å‹ï¼ˆå¦‚ `gemini-3-flash`ã€`gpt-4o`ï¼‰**ä»…ç”¨äºå®šä½æ ‡è®°æ¡†çš„åæ ‡**ï¼Œç„¶åå°†åæ ‡ä¼ ç»™**æœ¬åœ° Sharp ç®—æ³•**ï¼Œä½¿ç”¨å‘¨å›´åƒç´ å‡å€¼è¿›è¡Œå¡«å……ä¿®å¤ã€‚AI ä»…è´Ÿè´£"çœ‹"ï¼Œä¿®å¤ç”±æœ¬åœ°å®Œæˆã€‚
>
> **ä½•æ—¶ä½¿ç”¨**ï¼š
>
> - èƒŒæ™¯ä¸ºçº¯è‰²æˆ–æ¥è¿‘çº¯è‰²ï¼ˆå¦‚ç™½æ¿ã€PPT æˆªå›¾ã€è¡¨æ ¼ç­‰ï¼‰
> - éœ€è¦æ‰¹é‡å¤„ç†å¤§é‡å›¾ç‰‡
> - å¸Œæœ›æè‡´å‹ç¼© API æˆæœ¬
>
> **ä¼˜åŠ¿**ï¼šToken æ¶ˆè€—æä½ï¼ˆä»…æ–‡æœ¬è¾“å‡ºåæ ‡ï¼‰ï¼Œå¤„ç†é€Ÿåº¦æå¿«ï¼Œå®Œå…¨å¯ä»¥æœ¬åœ°ç¦»çº¿å®Œæˆä¿®å¤æ­¥éª¤ã€‚

### ğŸ› ï¸ ç”Ÿäº§åŠ›å·¥å…·é›†

- **CLI äº¤äº’ç•Œé¢**: ç°ä»£åŒ– TUIï¼Œæ”¯æŒ `è¾“å‡ºæ ¼å¼` é€‰æ‹©ã€`ç›®å½•ç»“æ„ä¿æŒ` å¼€å…³åŠé”®ç›˜å¿«æ·é”®æ“ä½œã€‚
- **æ‰¹é‡å¹¶å‘å¤„ç†**: æ™ºèƒ½é€’å½’éå†ç›®å½•ï¼Œæ”¯æŒ **å¤šçº¿ç¨‹å¹¶å‘** (é»˜è®¤ä¸º1ï¼Œæœ€é«˜10)ï¼Œå¤§å¹…æå‡å¤„ç†æ•ˆç‡ã€‚
- **ä»»åŠ¡çº§æ™ºèƒ½ç†”æ–­**: å†…ç½® 120ç§’ ä»»åŠ¡è¶…æ—¶ç†”æ–­æœºåˆ¶ï¼Œé˜²æ­¢å•ä»»åŠ¡é˜»å¡æ•´ä½“è¿›åº¦ã€‚
- **æˆæœ¬ç†”æ–­æœºåˆ¶**: æ”¯æŒè®¾ç½® `budgetLimit` (ç¾å…ƒ)ï¼Œè¾¾åˆ°é¢„ç®—ä¸Šé™è‡ªåŠ¨å®‰å…¨åœæœºã€‚
- **ä¾¿æºå•æ–‡ä»¶**: æŠ¥å‘Šæ¨¡æ¿å†…ç½®ï¼Œç¼–è¯‘åçš„äºŒè¿›åˆ¶æ–‡ä»¶å¯ **å•æ–‡ä»¶ç‹¬ç«‹è¿è¡Œ**ï¼Œæ— éœ€ä»»ä½•ä¾èµ–ã€‚
- **å¯è§†åŒ–æŠ¥è¡¨**: å¤„ç†å®Œæˆåè‡ªåŠ¨ç”Ÿæˆ HTML æŠ¥å‘Šï¼Œå«å¤„ç†å‰åå¯¹æ¯”åŠè¯¦ç»†æ•°æ®ã€‚

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

æœ¬é¡¹ç›®é‡‡ç”¨å…¨é“¾è·¯ **Bun** æ¶æ„ï¼Œè¯·ç¡®ä¿å·²å®‰è£… [Bun Runtime](https://bun.sh)ã€‚

```bash
# å®‰è£…ä¾èµ–
bun install
```

### 2. å¯åŠ¨åº”ç”¨

```bash
bun start
```

é¦–æ¬¡è¿è¡Œä¼šè‡ªåŠ¨ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼š

- **macOS**: `~/.marker-cleaner/marker-cleaner.json`
- **Windows**: `%APPDATA%/marker-cleaner/marker-cleaner.json`

---

## âš™ï¸ é…ç½®æŒ‡å—

### æ ¸å¿ƒ Provider é€‰æ‹©

#### æ–¹æ¡ˆ Aï¼šè¿½æ±‚æé€Ÿæ€§ä»·æ¯” (Google API)

ä½¿ç”¨ Google å®˜æ–¹æ¸ é“ï¼Œé…åˆæœ€æ–°çš„ Gemini 2.5 Flash æ¨¡å‹ã€‚

> [!IMPORTANT]
> **æ³¨æ„**ï¼šGoogle å®˜æ–¹ API è¦æ±‚è´¦å·ç­‰çº§è¾¾åˆ° **Tier 1** æ‰èƒ½è°ƒç”¨ Image ç”Ÿæˆæ¨¡å‹ã€‚å¦‚æœä¸æ»¡è¶³æ­¤æ¡ä»¶ï¼Œè¯·ä½¿ç”¨ **Antigravity** æ¸ é“ã€‚

```json
{
  "provider": "google",
  "providerSettings": {
    "google": {
      "apiKey": "YOUR_GOOGLE_API_KEY",
      "modelName": "gemini-2.5-flash-image"
    }
  }
}
```

#### æ–¹æ¡ˆ Bï¼šè¿½æ±‚æè‡´ç”»è´¨ä¸èƒ½åŠ› (Antigravity - æ¨è)

ä½¿ç”¨å†…éƒ¨ Antigravity æ¸ é“ï¼Œæ”¯æŒ Gemini 3 å…¨ç³»åˆ—é¡¶çº§æ¨¡å‹ï¼Œä¸”æ—  Tier é™åˆ¶ã€‚

```json
{
  "provider": "antigravity",
  "providerSettings": {
    "antigravity": {
      "apiKey": "YOUR_ANTIGRAVITY_TOKEN", // ç•™ç©ºï¼Œä½¿ç”¨ TUI å†…ç½®ç™»å½•åŠŸèƒ½
      "modelName": "gemini-3-pro-image" // æˆ–åœ¨ TUI é€‰æ‹© (Manual Input) è¾“å…¥è‡ªå®šä¹‰æ¨¡å‹
    }
  }
}
```

### é«˜çº§å‚æ•°é…ç½®

| é…ç½®é¡¹                  | ç±»å‹     | é»˜è®¤å€¼     | è¯´æ˜                                    |
| :---------------------- | :------- | :--------- | :-------------------------------------- |
| `inputDir`              | `string` | `./input`  | å¾…å¤„ç†å›¾ç‰‡ç›®å½•                          |
| `outputDir`             | `string` | `./output` | ç»“æœè¾“å‡ºç›®å½•                            |
| `recursive`             | `bool`   | `true`     | æ˜¯å¦é€’å½’æ‰«æå­ç›®å½•                      |
| `outputFormat`          | `enum`   | `original` | ç»“æœå›¾ç‰‡æ ¼å¼ (original, png, jpg, webp) |
| `preserveStructure`     | `bool`   | `true`     | æ˜¯å¦ä¿æŒè¾“å…¥ç›®å½•çš„å±‚çº§ç»“æ„              |
| `concurrency`           | `number` | `1`        | å¹¶å‘å¤„ç†ä»»åŠ¡æ•° (å»ºè®® 1-5)               |
| `budgetLimit`           | `number` | `0`        | ä¼šè¯æˆæœ¬ä¸Šé™ (USD)ï¼Œ0 è¡¨ç¤ºä¸é™åˆ¶        |
| `debugLog`              | `bool`   | `false`    | æ˜¯å¦å¼€å¯è°ƒè¯•æ—¥å¿— (ç”¨äºæ’æŸ¥ API é—®é¢˜)    |
| `renameRules.enabled`   | `bool`   | `false`    | æ˜¯å¦å¯ç”¨è‡ªåŠ¨é‡å‘½å                      |
| `renameRules.timestamp` | `bool`   | `false`    | è¾“å‡ºæ–‡ä»¶åæ˜¯å¦é™„åŠ æ—¶é—´æˆ³                |
| `prompts.edit`          | `string` | (å†…ç½®)     | Native æ¨¡å¼ä¸‹çš„ AI æŒ‡ä»¤                 |
| `prompts.detect`        | `string` | (å†…ç½®)     | Detection æ¨¡å¼ä¸‹çš„ AI æŒ‡ä»¤              |

---

## ğŸ“¦ æ„å»ºä¸éƒ¨ç½²

æœ¬é¡¹ç›®æ”¯æŒäº¤å‰ç¼–è¯‘ä¸ºå•æ–‡ä»¶å¯æ‰§è¡Œç¨‹åºï¼Œæ— éœ€å®‰è£… Node/Bun ç¯å¢ƒå³å¯è¿è¡Œã€‚

```bash
# æ„å»ºæ‰€æœ‰å¹³å° (macOS, Windows, Linux)
bun run build

# ä»…æ„å»º macOS (ARM64)
bun run build:mac

# ä»…æ„å»º Windows (x64)
bun run build:win
```

æ„å»ºäº§ç‰©å°†è¾“å‡ºè‡³ `dist/` ç›®å½•ï¼š

- `marker-cleaner-macos`
- `marker-cleaner-win.exe`
- `marker-cleaner-linux`

---

## â“ æ•…éšœæ’é™¤

**Q: å¯åŠ¨æ—¶æç¤º `Sharp` ä¾èµ–ç¼ºå¤±ï¼Ÿ**

> æœ¬é¡¹ç›®ä¾èµ– `sharp` è¿›è¡Œæœ¬åœ°å›¾åƒå¤„ç†ã€‚è¯·å°è¯•è¿è¡Œ `bun add sharp` é‡æ–°å®‰è£…ï¼Œæˆ–ç¡®ä¿åœ¨æ„å»ºæ—¶æ­£ç¡®å¤„ç†äº† native æ¨¡å—ã€‚

**Q: Antigravity ç™»å½•åæç¤º "Project ID Missing"ï¼Ÿ**

> è¿™é€šå¸¸æ˜¯å› ä¸º Auth Token è¿‡æœŸæˆ–æœªæ­£ç¡®è·å– Project ä¿¡æ¯ã€‚è¯·åœ¨é…ç½®ç•Œé¢æŒ‰ `L` é”®é‡æ–°ç™»å½•ï¼Œå¹¶ç•™æ„æ§åˆ¶å°æ˜¯å¦æœ‰æŠ¥é”™ã€‚

**Q: Google Provider æŠ¥é”™ 403 / Permission Deniedï¼Ÿ**

> è¯·æ£€æŸ¥æ‚¨çš„ API Key å¯¹åº”çš„ Google Cloud é¡¹ç›®æ˜¯å¦å¼€é€šäº† Generative AI APIï¼Œå¹¶ç¡®è®¤è´¦å·æ˜¯å¦æ»¡è¶³ Tier 1 ç­‰çº§è¦æ±‚ (é’ˆå¯¹ Image æ¨¡å‹)ã€‚

---

## ğŸ“œ License

MIT License Â© 2026 Marker Cleaner Team
